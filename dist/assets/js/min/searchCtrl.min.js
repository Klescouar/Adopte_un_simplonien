app.controller("searchCtrl",["$scope","$http","serviceApi",function(t,e,a){t.schools=a.schools,t.togglePromo=!1,t.toggleLangage=!1,t.toggleContrat=!1,t.searchSchool=[],t.searchLangage=[],t.searchContrat=[],t.testData=[];var i={Langage:[],Ville:"",Contrat:[]};e.get(a.api).then(function(e){t.data=e.data,t.cardFull=e.data},function(t){console.log("C'est la merde!")});var o=function(){var e="undefined"!=typeof i.Langage[0]?i.Langage[0]:"",a="undefined"!=typeof i.Langage[1]?i.Langage[1]:"",o="undefined"!=typeof i.Langage[2]?i.Langage[2]:"",n="undefined"!=typeof i.Ville?i.Ville:"",l="undefined"!=typeof i.Contrat[0]?i.Contrat[0]:"",c="undefined"!=typeof i.Contrat[1]?i.Contrat[1]:"",g="undefined"!=typeof i.Contrat[2]?i.Contrat[2]:"",s="undefined"!=typeof i.Contrat[3]?i.Contrat[3]:"",r="undefined"!=typeof i.Contrat[4]?i.Contrat[4]:"";t.data=[],angular.forEach(t.cardFull,function(i,h){var v=i.contrat+" "+i.specialite1+" "+i.specialite2+" "+i.specialite3+" "+i.ville;v.match("^(?=.*"+e+")(?=.*"+a+")(?=.*"+o+")(?=.*"+n+")(?=.*"+l+")(?=.*"+c+")(?=.*"+g+")(?=.*"+s+")(?=.*"+r+")","i")&&(t.data.push(i),console.log(t.data))})};o(),t.themes=[{name:"Promo",active:!0},{name:"Langage",active:!1},{name:"Contrat",active:!1}],t.langages=[{type:"Javascript",active:!1},{type:"HTML/CSS",active:!1},{type:"PHP",active:!1},{type:"Angular",active:!1},{type:"REACT",active:!1},{type:"Typescript",active:!1},{type:"Jquery",active:!1},{type:"PHP",active:!1},{type:"symphony",active:!1},{type:"JAVA",active:!1},{type:"C#",active:!1},{type:"C++",active:!1},{type:"C",active:!1},{type:"SASS",active:!1},{type:"Gulp",active:!1},{type:"Grunt",active:!1},{type:"Jade",active:!1}],t.contrats=[{type:"CDD",active:!1},{type:"CDI",active:!1},{type:"Contrat Pro",active:!1},{type:"Stage",active:!1},{type:"Freelance",active:!1}],$(window).width()>640&&$(".filterRight").css("display","block"),$(window).resize(function(){$(window).width()>640&&$(".filterRight").css("display","block")}),$(document).ready(function(){$(function(){var t=$(".filterMain");if(t.length){var e=t.offset().top+4;$(window).scroll(function(){$(window).scrollTop()>e&&screen.width>640?($(".filterMain").addClass("sticktotop"),$(".cardPage").addClass("marginToFix")):($(".filterMain").removeClass("sticktotop"),$(".cardPage").removeClass("marginToFix"))})}})}),t.changeState=function(){"Promo"===this.theme.name?(this.theme.active=!0,t.themes[1].active=!1,t.themes[2].active=!1,$(window).width()<640&&t.togglePromo===!1?($(".filterRight").css("display","block"),t.togglePromo=!0,t.toggleLangage=!1,t.toggleContrat=!1):$(window).width()<640&&t.togglePromo===!0&&($(".filterRight").css("display","none"),t.togglePromo=!1)):"Langage"===this.theme.name?(this.theme.active=!0,t.themes[0].active=!1,t.themes[2].active=!1,$(window).width()<640&&t.toggleLangage===!1?($(".filterRight").css("display","block"),t.togglePromo=!1,t.toggleLangage=!0,t.toggleContrat=!1):$(window).width()<640&&t.toggleLangage===!0&&($(".filterRight").css("display","none"),t.toggleLangage=!1)):"Contrat"===this.theme.name&&(this.theme.active=!0,t.themes[0].active=!1,t.themes[1].active=!1,$(window).width()<640&&t.toggleContrat===!1?($(".filterRight").css("display","block"),t.togglePromo=!1,t.toggleLangage=!1,t.toggleContrat=!0):$(window).width()<640&&t.toggleContrat===!0&&($(".filterRight").css("display","none"),t.toggleContrat=!1))},t.changeFilterSchool=function(){if(0===i.Ville.length)this.school.active===!1?(this.school.active=!0,i.Ville=this.school.ville,o()):this.school.active===!0&&(this.school.active=!1,i.Ville="",o());else if(i.Ville.length>0)if(this.school.active===!0)this.school.active=!1,i.Ville="",o();else if(this.school.active===!1){for(var e=0;e<t.schools.length;e++)t.schools[e].active=!1,this.school.active=!0;i.Ville=this.school.ville,o()}},t.changeFilterLangage=function(){if(i.Langage.length<3){if(this.langage.active===!1)this.langage.active=!0,i.Langage.push(this.langage.type),o();else if(this.langage.active===!0){this.langage.active=!1;var t=i.Langage.indexOf(this.langage.type);t>-1&&i.Langage.splice(t,1),o()}}else if(i.Langage.length>=3){this.langage.active=!1;var t=i.Langage.indexOf(this.langage.type);t>-1&&i.Langage.splice(t,1),o()}},t.changeFilterContrat=function(){if(i.Contrat.length<3){if(this.contrat.active===!1)this.contrat.active=!0,i.Contrat.push(this.contrat.type),o();else if(this.contrat.active===!0){this.contrat.active=!1;var t=i.Contrat.indexOf(this.contrat.type);t>-1&&i.Contrat.splice(t,1),o()}}else if(i.Contrat.length>=3){this.contrat.active=!1;var t=i.Contrat.indexOf(this.contrat.type);t>-1&&i.Contrat.splice(t,1),o()}}}]);